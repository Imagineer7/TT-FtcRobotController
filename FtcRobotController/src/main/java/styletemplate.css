/* Improved FTC Program and Manage Interface Styles */
/* Automatically generated by ImprovedWebStyling.java */

/* === GLOBAL IMPROVEMENTS === */
:root {
    --primary-color: #42A5F5;
    --primary-dark: #1E88E5;
    --primary-light: #64B5F6;
    --accent-color: #FFA726;
    --success-color: #66BB6A;
    --warning-color: #FFA726;
    --error-color: #EF5350;
    --background: #1E1E1E;
    --card-background: #2D2D2D;
    --text-primary: #E0E0E0;
    --text-secondary: #B0B0B0;
    --border-color: #404040;
    --shadow: 0 2px 4px rgba(0,0,0,0.3);
    --shadow-hover: 0 4px 8px rgba(0,0,0,0.4);
    --input-background: #333333;
    --dropdown-background: #2D2D2D;
    --dropdown-hover: #3D3D3D;
}

/* Smooth scrolling and better font rendering */
html {
    scroll-behavior: smooth;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
    background: var(--background) !important;
    color: var(--text-primary) !important;
    line-height: 1.6 !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    width: 100%;
    min-height: 100vh;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Only apply text color to body text, not inherited by all children */
body > * {
    color: var(--text-primary);
}

/* Ensure main containers take full width */
#main, #content, .container, .wrapper, main {
    width: 100% !important;
    max-width: none !important;
}

/* Override white backgrounds with dark theme */
[style*="background-color: white"], [style*="background: white"],
.white-bg, .light-bg {
    background: var(--card-background) !important;
    color: var(--text-primary) !important;
}

[style*="background-color: rgb(255"], [style*="background: rgb(255"] {
    background: var(--card-background) !important;
    color: var(--text-primary) !important;
}

/* Force dark backgrounds on common container elements */
div[style*="background"], span[style*="background"] {
    background: var(--card-background) !important;
    color: var(--text-primary) !important;
}

/* Aggressive fix for any remaining white backgrounds */
div[style*="background-color: white"],
div[style*="background: white"],
td[style*="background-color: white"],
td[style*="background: white"],
rect[fill="white"],
rect[fill="#fff"],
rect[fill="#ffffff"] {
    background: var(--background) !important;
    background-color: var(--background) !important;
    fill: var(--background) !important;
}

/* Fix any SVG rects with white fill */
svg rect[fill="white"],
svg rect[fill="#fff"],
svg rect[fill="#ffffff"],
svg rect[fill="rgb(255, 255, 255)"] {
    fill: var(--background) !important;
}

/* === BUTTONS === */
/* Only style standard buttons, not editor/tool buttons */
button:not([class*="blockly"]):not([class*="monaco"]):not([class*="editor"]),
.button,
input[type='button']:not([class*="blockly"]):not([class*="monaco"]),
input[type='submit'] {
    background: var(--primary-color) !important;
    color: white !important;
    border: none !important;
    border-radius: 4px !important;
    padding: 8px 16px !important;
    font-size: 13px !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-shadow: var(--shadow) !important;
    letter-spacing: 0.3px !important;
    line-height: 1.4 !important;
}

/* Smaller buttons for Blocks editor toolbar */
.blocklySvg button,
.blocklyToolboxDiv button,
.blocklyFlyout button,
.blocklyTrashcan,
div[id*="blocks"] button,
div[class*="blockly"] button {
    padding: 4px 10px !important;
    font-size: 11px !important;
    min-height: auto !important;
    height: auto !important;
}

button:not([class*="blockly"]):not([class*="monaco"]):not([class*="editor"]):hover,
.button:hover,
input[type='button']:not([class*="blockly"]):not([class*="monaco"]):hover,
input[type='submit']:hover {
    background: var(--primary-dark) !important;
    box-shadow: var(--shadow-hover) !important;
    transform: translateY(-1px) !important;
}

button:not([class*="blockly"]):not([class*="monaco"]):not([class*="editor"]):active,
.button:active,
input[type='button']:not([class*="blockly"]):not([class*="monaco"]):active,
input[type='submit']:active {
    transform: translateY(0) !important;
    box-shadow: var(--shadow) !important;
}

button:not([class*="blockly"]):not([class*="monaco"]):not([class*="editor"]):disabled,
.button:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
    transform: none !important;
}

/* Icon-only buttons should be more compact */
button:empty, button[aria-label]:not([aria-label=""]) {
    padding: 6px !important;
    min-width: 32px !important;
}

/* === INPUT FIELDS === */
input[type='text'], input[type='password'], input[type='email'],
input[type='number'], textarea, select {
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    padding: 8px 12px !important;
    font-size: 13px !important;
    transition: all 0.2s ease !important;
    background: var(--input-background) !important;
    color: var(--text-primary) !important;
    line-height: 1.4 !important;
}

/* Fix dropdown/select specific styling */
select {
    background: var(--dropdown-background) !important;
    color: var(--text-primary) !important;
    border: 1px solid var(--border-color) !important;
}

/* Fix dropdown options */
select option {
    background: var(--dropdown-background) !important;
    color: var(--text-primary) !important;
}

select option:hover,
select option:checked {
    background: var(--dropdown-hover) !important;
    color: var(--text-primary) !important;
}

input:focus, textarea:focus, select:focus {
    outline: none !important;
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.15) !important;
}

/* Smaller inputs in toolbars and compact areas */
.toolbar input, .compact input, div[class*="blockly"] input {
    padding: 4px 8px !important;
    font-size: 12px !important;
}

/* === CARDS AND PANELS === */
.card, .panel, .block {
    background: var(--card-background) !important;
    border-radius: 6px !important;
    box-shadow: var(--shadow) !important;
    padding: 16px !important;
    margin-bottom: 16px !important;
    transition: box-shadow 0.2s ease !important;
    border: 1px solid var(--border-color) !important;
}

.card:hover, .panel:hover {
    box-shadow: var(--shadow-hover) !important;
}

/* === HEADERS === */
h1, h2, h3, h4, h5, h6 {
    font-weight: 500 !important;
    margin-top: 0 !important;
}

/* Only force color on light backgrounds */
body > h1, body > h2, body > h3, body > h4, body > h5, body > h6,
.card h1, .card h2, .card h3, .card h4, .card h5, .card h6,
.panel h1, .panel h2, .panel h3, .panel h4, .panel h5, .panel h6 {
    color: var(--text-primary) !important;
}

h1 { font-size: 2em !important; }
h2 { font-size: 1.6em !important; }
h3 { font-size: 1.3em !important; }
h4 { font-size: 1.1em !important; }

/* === NAVIGATION / TABS === */
nav, .nav, .tabs, [class*='nav'], [class*='tab'] {
    background: var(--card-background) !important;
    box-shadow: var(--shadow) !important;
    border-radius: 4px !important;
}

.tab, .nav-item, [class*='tab-'] {
    border-radius: 4px !important;
    transition: all 0.3s ease !important;
}

.tab:hover, .nav-item:hover {
    background: var(--primary-light) !important;
}

.tab.active, .nav-item.active {
    background: var(--primary-color) !important;
    color: white !important;
}

/* === TABLES === */
table {
    border-collapse: collapse !important;
    border-radius: 4px !important;
    overflow: hidden !important;
    margin: 10px 0 !important;
}

/* Only style tables in main content areas */
.card table, .panel table, body > table {
    background: var(--card-background) !important;
    box-shadow: var(--shadow) !important;
}

th {
    background: var(--primary-color) !important;
    color: white !important;
    padding: 10px 12px !important;
    text-align: left !important;
    font-weight: 500 !important;
    font-size: 13px !important;
}

td {
    padding: 10px 12px !important;
    border-bottom: 1px solid var(--border-color) !important;
    color: var(--text-primary) !important;
    font-size: 13px !important;
    background: var(--card-background) !important;
}

/* Fix blank table cells specifically */
td.blank_td, .blank_td {
    background: var(--card-background) !important;
    background-color: var(--card-background) !important;
}

tbody tr:hover {
    background: rgba(66,165,245,0.15) !important;
}

/* Ensure table rows have proper background */
tbody tr {
    background: var(--card-background) !important;
}

tr:last-child td {
    border-bottom: none !important;
}

/* === ALERTS / NOTIFICATIONS === */
.alert, .notification, .message, [class*='alert'], [class*='notification'] {
    padding: 15px 20px !important;
    border-radius: 4px !important;
    margin-bottom: 15px !important;
    border-left: 4px solid !important;
}

.alert.success, .success {
    background: rgba(102,187,106,0.15) !important;
    border-left-color: var(--success-color) !important;
    color: #2E7D32 !important;
}

.alert.warning, .warning {
    background: rgba(255,167,38,0.15) !important;
    border-left-color: var(--warning-color) !important;
    color: #E65100 !important;
}

.alert.error, .error {
    background: rgba(239,83,80,0.15) !important;
    border-left-color: var(--error-color) !important;
    color: #C62828 !important;
}

.alert.info, .info {
    background: rgba(66,165,245,0.15) !important;
    border-left-color: var(--primary-color) !important;
    color: #1565C0 !important;
}

/* === CODE EDITOR IMPROVEMENTS === */
pre, code {
    font-family: 'Fira Code', 'Monaco', 'Consolas', monospace !important;
    background: #1E1E1E !important;
    color: #D4D4D4 !important;
    padding: 15px !important;
    border-radius: 4px !important;
    overflow-x: auto !important;
    line-height: 1.5 !important;
}

code {
    padding: 2px 6px !important;
    font-size: 0.9em !important;
}

/* === SCROLLBARS === */
::-webkit-scrollbar {
    width: 12px !important;
    height: 12px !important;
}

::-webkit-scrollbar-track {
    background: var(--background) !important;
}

::-webkit-scrollbar-thumb {
    background: #555555 !important;
    border-radius: 6px !important;
}

::-webkit-scrollbar-thumb:hover {
    background: #666666 !important;
}

/* Fix Blockly scrollbar handles */
.blocklyScrollbarHandle {
    fill: #555555 !important;
}

.blocklyScrollbarHandle:hover {
    fill: #666666 !important;
}

/* Fix Blockly scrollbar background */
.blocklyScrollbarBackground {
    fill: var(--card-background) !important;
    fill-opacity: 0.5 !important;
}

/* === LOADING / SPINNER === */
.spinner, .loading, [class*='spinner'], [class*='loading'] {
    border: 3px solid var(--border-color) !important;
    border-top-color: var(--primary-color) !important;
    border-radius: 50% !important;
    animation: spin 1s linear infinite !important;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* === MODAL / DIALOG === */
.modal, .dialog, [class*='modal'], [class*='dialog'] {
    background: var(--card-background) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
    padding: 0 !important;
}

.modal-header, .dialog-header {
    background: var(--primary-color) !important;
    color: white !important;
    padding: 20px !important;
    border-radius: 8px 8px 0 0 !important;
}

.modal-body, .dialog-body {
    padding: 20px !important;
}

.modal-footer, .dialog-footer {
    padding: 20px !important;
    background: var(--background) !important;
    border-radius: 0 0 8px 8px !important;
    text-align: right !important;
}

/* === LINKS === */
a {
    color: var(--primary-color) !important;
    text-decoration: none !important;
    transition: all 0.3s ease !important;
}

a:hover {
    color: var(--primary-dark) !important;
    text-decoration: underline !important;
}

/* === BADGES / CHIPS === */
.badge, .chip, .tag, [class*='badge'], [class*='chip'], [class*='tag'] {
    display: inline-block !important;
    padding: 4px 12px !important;
    border-radius: 12px !important;
    font-size: 0.85em !important;
    font-weight: 500 !important;
    background: var(--primary-light) !important;
    color: var(--primary-dark) !important;
}

/* === TOOLTIPS === */
[title]:hover::after {
    content: attr(title) !important;
    position: absolute !important;
    background: #263238 !important;
    color: white !important;
    padding: 8px 12px !important;
    border-radius: 4px !important;
    font-size: 12px !important;
    white-space: nowrap !important;
    z-index: 1000 !important;
}

/* === BLOCKS EDITOR SPECIFIC === */
/* Fix Blockly main background */
.blocklyMainBackground, rect.blocklyMainBackground {
    fill: var(--background) !important;
}

/* Fix Blockly toolbox background */
.blocklyToolboxDiv {
    background: var(--card-background) !important;
}

/* Fix Blockly flyout backgrounds */
.blocklyFlyout {
    fill: var(--card-background) !important;
    background: var(--card-background) !important;
}

.blocklyFlyoutBackground, rect.blocklyFlyoutBackground {
    fill: var(--card-background) !important;
    fill-opacity: 1 !important;
}

/* Fix Blockly text colors - make them white for visibility on colored blocks */
.blocklyText {
    fill: #ffffff !important;
}

.blocklyEditableText {
    fill: #ffffff !important;
}

/* Fix text background rectangles on blocks - make them semi-transparent or remove */
rect.blocklyTextBackground, .blocklyTextBackground {
    fill: rgba(0, 0, 0, 0.3) !important;
    fill-opacity: 0.3 !important;
}

/* Fix field text backgrounds */
rect[class*="blocklyField"] {
    fill: rgba(0, 0, 0, 0.2) !important;
}

/* Target all rect elements inside blockly blocks that are used for text fields */
.blocklyEditableText + rect,
.blocklyText + rect,
g.blocklyEditableText rect,
g.blocklyText rect {
    fill: rgba(0, 0, 0, 0.3) !important;
}

/* Target rect elements with rounded corners (rx/ry attributes) - these are typically input fields */
.blocklySvg rect[rx],
.blocklySvg rect[ry] {
    fill: rgba(0, 0, 0, 0.3) !important;
}

/* Target all rects inside input/field groups */
g[class*="field"] rect,
g[class*="input"] rect,
g[class*="Field"] rect,
g[class*="Input"] rect {
    fill: rgba(0, 0, 0, 0.3) !important;
}

/* Specific targeting for text input field backgrounds */
.blocklyFieldRect, rect.blocklyFieldRect {
    fill: rgba(0, 0, 0, 0.3) !important;
}

/* Target any rect that's a sibling of text elements in blocks */
.blocklySvg text ~ rect {
    fill: rgba(0, 0, 0, 0.3) !important;
}

/* Fix HTML input fields inside blocks */
.blocklyHtmlInput {
    background: rgba(0, 0, 0, 0.5) !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
    color: #ffffff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.blocklyHtmlInput:focus {
    background: rgba(0, 0, 0, 0.6) !important;
    border: 1px solid var(--primary-color) !important;
    outline: none !important;
}

/* Fix Blockly tree row backgrounds (toolbox categories) */
.blocklyTreeRow {
    background-color: var(--card-background) !important;
    color: var(--text-primary) !important;
}

.blocklyTreeRow:hover {
    background-color: var(--dropdown-hover) !important;
}

.blocklyTreeRowContentContainer {
    color: var(--text-primary) !important;
}

.blocklyTreeLabel {
    color: var(--text-primary) !important;
}

/* --- TeleOp / Autonomous project_flavor dropdown fixes --- */
/* Ensure the select element itself uses dark background and readable text */
select#project_flavor,
#project_flavor {
  background: var(--dropdown-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  min-height: 28px;
  padding: 4px 8px;
  font-size: 13px;
}

select#project_flavor:focus,
#project_flavor:focus {
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 2px rgba(66,165,245,0.25) !important;
  outline: none !important;
}

/* Style individual options */
select#project_flavor option {
  background: var(--dropdown-background) !important;
  color: var(--text-primary) !important;
}

/* Highlight the chosen option distinctly */
select#project_flavor option:checked,
select#project_flavor option[selected] {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  font-weight: 500;
}

/* In some browsers option:checked does not show while closed; ensure visible label span (if used) */
#project_flavor_display, .project_flavor_display {
  color: var(--text-primary) !important;
  font-weight: 500;
}

/* Closure-style dropdown menus tied to project_flavor */
#project_flavor .goog-menuitem,
#project_flavor.goog-menuitem {
  background: var(--dropdown-background) !important;
  color: var(--text-primary) !important;
}

#project_flavor .goog-menuitem-selected,
#project_flavor .goog-option-selected,
#project_flavor .goog-menuitem-selected:hover {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  font-weight: 500;
}

/* Make sure hover does not override selected visibility */
#project_flavor .goog-menuitem:hover:not(.goog-menuitem-selected):not(.goog-option-selected) {
  background: var(--dropdown-hover) !important;
  color: var(--text-primary) !important;
}

/* Checkbox / checkmark inside selected entries */
#project_flavor .goog-menuitem-checkbox,
#project_flavor .goog-menuitem-icon {
  filter: none !important; /* remove invert so checkmark is natural */
  color: #FFFFFF !important;
}

/* If a custom checkmark uses background image, gently dim unselected */
#project_flavor .goog-menuitem:not(.goog-menuitem-selected) .goog-menuitem-checkbox {
  opacity: 0.6;
}

/* High specificity fallbacks for any white background leakage */
#project_flavor option[style*='white'],
#project_flavor .goog-menuitem[style*='white'] {
  background: var(--dropdown-background) !important;
  color: var(--text-primary) !important;
}
/* --- End project_flavor fixes --- */

/* === GOOGLE CLOSURE MENU COMPONENTS (Blockly Dropdowns) === */
/* Fix dropdown menu container */
.goog-menu, .goog-menu-vertical, .blocklyDropdownMenu {
    background: var(--dropdown-background) !important;
    background-color: var(--dropdown-background) !important;
    border: 1px solid var(--border-color) !important;
    box-shadow: var(--shadow-hover) !important;
}

/* Fix menu items */
.goog-menuitem {
    background: var(--dropdown-background) !important;
    color: var(--text-primary) !important;
}

.goog-menuitem:hover,
.goog-menuitem-highlight {
    background: var(--dropdown-hover) !important;
    background-color: var(--dropdown-hover) !important;
    color: var(--text-primary) !important;
}

/* Fix menu item content */
.goog-menuitem-content {
    color: var(--text-primary) !important;
}

/* Fix option items */
.goog-option {
    background: var(--dropdown-background) !important;
    color: var(--text-primary) !important;
}

.goog-option:hover,
.goog-option-selected {
    background: var(--dropdown-hover) !important;
    color: var(--text-primary) !important;
}

/* Fix checkbox items in menus */
.goog-menuitem-checkbox,
.goog-menuitem-icon {
    color: var(--text-primary) !important;
    filter: brightness(0.9) invert(1) !important;
}

/* Fix selected state */
.goog-menuitem-selected,
.goog-option-selected {
    background: var(--primary-color) !important;
    color: white !important;
}

/* Fix disabled menu items */
.goog-menuitem-disabled {
    opacity: 0.5 !important;
    color: var(--text-secondary) !important;
}

/* Fix menu separators */
.goog-menuseparator {
    border-top: 1px solid var(--border-color) !important;
    background: transparent !important;
}

/* Don't interfere with other Blockly internal styling */
.blocklySvg, .blocklyWorkspace {
    color: inherit !important;
}


/* Tone down Blockly block colors for dark theme */
.blocklyPath, [class*="blocklyPath"] {
    filter: brightness(0.7) !important;
}

/* Also apply to the main block path elements */
path.blocklyPath {
    filter: brightness(0.7) !important;
}

/* Apply to all path elements in blocks */
.blocklyDraggable path,
g.blocklyDraggable path {
    filter: brightness(0.7) !important;
}

/* Preserve Blockly's drag and drop functionality */
.blocklyDraggable, .blocklyDragging {
    pointer-events: auto !important;
    cursor: inherit !important;
}

/* Don't style Blockly's internal buttons - preserve their original appearance */
.blocklyIconGroup button, .blocklyFlyoutButton {
    background: revert !important;
    color: revert !important;
    border: revert !important;
    padding: revert !important;
    font-size: revert !important;
    cursor: pointer !important;
}

/* === ONBOT JAVA / MONACO EDITOR PROTECTION === */
/* Fix Java editor container backgrounds */
.javaContentContainer, #javaContentContainer {
    background: var(--background) !important;
    background-color: var(--background) !important;
}

.vertical_area, #vertical_area {
    background: var(--background) !important;
    background-color: var(--background) !important;
}

/* Fix parent_area and all horizontal/vertical area containers */
.parent_area, .horizontal_area, .vertical_area,
.fill_area, .no_min_height {
    background: var(--background) !important;
    background-color: var(--background) !important;
    color: var(--text-primary) !important;
}

/* Specific targeting for parent_area with multiple classes */
div[class*="parent_area"] {
    background: var(--background) !important;
    background-color: var(--background) !important;
}

/* Don't interfere with Monaco editor */
.monaco-editor, .monaco-editor * {
    color: inherit !important;
    background: inherit !important;
}

/* Preserve code editor functionality */
.view-lines, .view-line, .mtk1, .mtk2, .mtk3, .mtk4, .mtk5, .mtk6,
[class*="monaco"], [class*="editor"] {
    color: inherit !important;
}

/* === PREVENT CSS FROM BREAKING DYNAMIC CONTENT === */
/* Don't style elements that are programmatically controlled */
[data-preview], [data-editor], [data-view] {
    color: inherit !important;
    background: inherit !important;
}

/* Preserve iframe, canvas, svg natural behavior but don't break layout */
iframe, canvas {
    max-width: 100% !important;
}

svg {
    max-width: none !important;
}

/* Allow JavaScript to control these elements */
[style*="display: none"], [hidden] {
    display: none !important;
}

/* Don't interfere with drag-drop or resize operations */
[draggable="true"], [resizable], .resizable {
    cursor: inherit !important;
    user-select: inherit !important;
}

/* === RESPONSIVE IMPROVEMENTS === */
@media (max-width: 768px) {
    body {
        font-size: 14px !important;
    }

    .card, .panel {
        padding: 12px !important;
    }

    button, .button {
        padding: 6px 12px !important;
        font-size: 12px !important;
    }
}

/* === ACCESSIBILITY === */
*:focus {
    outline: 2px solid var(--primary-color) !important;
    outline-offset: 2px !important;
}

/* --- Dark Theme Component: bordered-text-block --- */
/* Added styling for bordered-text-block to be readable in dark mode */
.bordered-text-block {
  background: var(--card-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 4px !important;
  padding: 4px 6px !important;
  font-size: 12px !important;
  line-height: 1.3 !important;
  box-shadow: 0 1px 2px rgba(0,0,0,.4);
}
/* If bordered-text-block appears inside Blockly SVG, ensure text contrast */
.blocklySvg .bordered-text-block text { fill: #FFFFFF !important; }

/* OPTIONAL emphasis variant */
.bordered-text-block.emphasis {
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 1px var(--primary-color), 0 2px 6px rgba(0,0,0,.5);
}

/* Focus accessibility */
.bordered-text-block:focus {
  outline: 2px solid var(--primary-color) !important;
  outline-offset: 2px !important;
}
/* --- End bordered-text-block --- */

/* --- Scoped High Contrast Mode (replaces previous global variant overrides) --- */
/* Previous (problematic) implementation commented out for safety & performance: */
/*
@media (prefers-contrast: high) {
  :root {
    --border-color: #000000 !important;
    --text-primary: #000000 !important;
  }
}
*/
/* New approach: do not override global variables; gently increase contrast of key borders when user requests high contrast */
@media (prefers-contrast: high) {
  .ftc-dark .card, .ftc-dark .panel, .ftc-dark .bordered-text-block {
    border-color: rgba(255,255,255,0.85) !important;
  }
  .ftc-dark .goog-menuitem-selected, .ftc-dark .goog-option-selected {
    box-shadow: 0 0 0 2px rgba(255,255,255,0.6) !important;
  }
}
/* --- End Scoped High Contrast Mode --- */

/* --- Scoped Reduced Motion (replaces previous global wildcard) --- */
/* Previous (problematic) implementation commented out: */
/*
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
*/
/* New approach: only target non-functional cosmetic transitions within our theme scope */
@media (prefers-reduced-motion: reduce) {
  .ftc-dark button,
  .ftc-dark .card,
  .ftc-dark .panel,
  .ftc-dark .goog-menuitem,
  .ftc-dark .goog-option,
  .ftc-dark .badge,
  .ftc-dark .chip {
    transition: none !important;
    animation: none !important;
  }
  .ftc-dark .spinner { animation: none !important; }
}
/* --- End Scoped Reduced Motion --- */

/* Helper class to activate dark theme scoping if desired */
.ftc-dark .bordered-text-block { background: var(--card-background) !important; }

/* --- Dark Theme Enhancements: Headings, Navigation, OnBot Java Components --- */
/* Headings: ensure neutral light color, remove unintended dark red inheritance */
h1, h1 a { color: var(--text-primary) !important; }

/* Navigation anchor buttons (limit to nav containers to avoid global link overrides) */
nav a, .nav a, .tabs a, .tab a {
  background: #2D2D2D !important;
  color: var(--text-primary) !important;
  padding: 6px 12px !important;
  border-radius: 6px !important;
  text-decoration: none !important;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid var(--border-color) !important;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
nav a:hover, .nav a:hover, .tabs a:hover, .tab a:hover {
  background: #353535 !important;
  border-color: #555 !important;
  color: #FFFFFF !important;
}
nav a:active, .nav a:active, .tabs a:active, .tab a:active {
  background: #1E1E1E !important;
  border-color: var(--primary-color) !important;
}
nav a.active, .nav a.active, .tabs a.active, .tab a.active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 1px rgba(66,165,245,0.6);
}

/* OnBot Java: File tree container */
.file-tree-container, #file-tree-container {
  background: #252525 !important;
  color: var(--text-primary) !important;
  border-right: 1px solid var(--border-color) !important;
  font-size: 13px !important;
}
.file-tree-container a, #file-tree-container a {
  color: var(--text-primary) !important;
}
.file-tree-container a:hover, #file-tree-container a:hover {
  color: #FFFFFF !important;
  background: #333333 !important;
}

/* Resizable pane handle */
.left-pane-handle, #left-pane-handle {
  background: #303030 !important;
  width: 6px !important;
  cursor: col-resize !important;
  border-left: 1px solid #202020 !important;
  border-right: 1px solid #202020 !important;
}
.left-pane-handle:hover { background: #3A3A3A !important; }

/* Ace editor content area */
.ace_editor {
  background: #1E1E1E !important;
  color: var(--text-primary) !important;
}
/* Ace gutter (line numbers) */
.ace_gutter {
  background: #272727 !important;
  border-right: 1px solid #333 !important;
}
.ace_gutter-cell {
  background: transparent !important;
  color: #8B8B8B !important;
  padding-right: 10px !important;
  text-align: right !important;
}
.ace_gutter-cell.ace_gutter-active-line {
  background: #313131 !important;
  color: #CCCCCC !important;
}

/* Current line highlight */
.ace_marker-layer .ace_active-line { background: rgba(255,255,255,0.05) !important; }
.ace_marker-layer .ace_selection { background: rgba(66,165,245,0.35) !important; }

/* Build log pane */
.build-log-pane, #build-log-pane {
  background: #181818 !important;
  color: #CFCFCF !important;
  border-top: 1px solid #303030 !important;
  font-family: monospace !important;
  font-size: 12px !important;
  line-height: 1.4 !important;
  padding: 6px 10px !important;
}
.build-log-pane .error { color: #EF5350 !important; }
.build-log-pane .warn { color: #FFA726 !important; }
.build-log-pane .info { color: #64B5F6 !important; }

/* FontAwesome warning icon */
.fa.fa-2x.fa-warning, .fa.fa-warning, .fa-warning {
  color: #FFA726 !important;
  text-shadow: 0 0 4px rgba(255,167,38,0.4);
}

/* Improve contrast for any leftover light backgrounds inside OnBot Java panels */
.onbotjava-container div[style*='background:#fff'],
.onbotjava-container div[style*='background: #fff'],
.onbotjava-container div[style*='background-color: #fff'] {
  background: #252525 !important;
  color: var(--text-primary) !important;
}

/* Scrollbars inside file tree & build log */
.file-tree-container ::-webkit-scrollbar,
.build-log-pane ::-webkit-scrollbar { width: 10px; }
.file-tree-container ::-webkit-scrollbar-thumb,
.build-log-pane ::-webkit-scrollbar-thumb { background:#444; border-radius:5px; }
.file-tree-container ::-webkit-scrollbar-thumb:hover,
.build-log-pane ::-webkit-scrollbar-thumb:hover { background:#555; }

/* Ensure links inside OnBot Java content do not inherit nav button backgrounds */
.file-tree-container a,
.build-log-pane a { background: transparent !important; }
/* --- End Dark Theme Enhancements --- */

/* --- Additional Dark Theme Overrides (open-files, file-tree-title, build-log-handle, project-files-container, ace_content refinement) --- */
.open-files, #open-files {
  background: #222 !important;
  color: var(--text-primary) !important;
  border-bottom: 1px solid var(--border-color) !important;
  padding: 4px 8px !important;
  font-size: 12px !important;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.open-files .file-tab, .open-files .tab, #open-files .file-tab {
  background: #2A2A2A !important;
  color: var(--text-primary) !important;
  padding: 4px 10px !important;
  border: 1px solid #333 !important;
  border-radius: 4px;
  cursor: pointer;
  transition: background .15s ease, color .15s ease;
}
.open-files .file-tab:hover { background:#353535 !important; }
.open-files .file-tab.active { background: var(--primary-color) !important; color:#fff !important; border-color: var(--primary-color) !important; }

.file-tree-title, #file-tree-title {
  background: #202020 !important;
  color: var(--text-primary) !important;
  font-weight: 600;
  padding: 6px 10px !important;
  font-size: 13px !important;
  border-bottom: 1px solid var(--border-color) !important;
  letter-spacing: .5px;
}

.project-files-container, #project-files-container {
  background: #242424 !important;
  color: var(--text-primary) !important;
  padding: 4px 6px !important;
}
.project-files-container a { color: var(--text-primary) !important; }
.project-files-container a:hover { color:#fff !important; background:#333 !important; }

.build-log-handle, #build-log-handle {
  background:#262626 !important;
  height: 6px !important;
  cursor: row-resize !important;
  border-top: 1px solid #303030 !important;
  border-bottom: 1px solid #303030 !important;
}
.build-log-handle:hover { background:#303030 !important; }

/* Refine ace_content spacing & font smoothing */
.ace_content, .ace_editor, .ace_scroller {
  -webkit-font-smoothing: antialiased;
  font-size: 13px !important;
}
/* Improve selection visibility without overpowering */
.ace_marker-layer .ace_selection { background: rgba(100,180,255,0.30) !important; }
/* Dim inactive tabs text if present inside open-files */
.open-files .file-tab.disabled { opacity:.55; cursor: default; }
/* Remove any accidental light backgrounds inside these containers */
.open-files [style*='background:#fff'], .project-files-container [style*='background:#fff'] { background:#2A2A2A !important; }
/* --- End Additional Dark Theme Overrides --- */

/* --- Ace Editor Full-Dark Override & Menu Container Styling --- */
/* Reason: some inner Ace layers keep default white background causing horizontal white region when scrolling. */
.ace_editor {
  background: #1E1E1E !important;
  color: var(--text-primary) !important;
}
.ace_scroller {
  background: #1E1E1E !important;
  background-color: #1E1E1E !important;
}
/* Only set background on outer container, not on layers that need to scroll */
.ace_content {
  background: transparent !important;
}
.ace_layer {
  background: transparent !important;
}
.ace_text-layer, .ace_marker-layer, .ace_cursor-layer {
  background: transparent !important;
}
/* Print margin (vertical guide) */
.ace_print-margin { background: transparent !important; border-left: 1px solid #333 !important; }
/* Sometimes Ace uses inline background on div[style] inside scroller; neutralize only if white */
.ace_scroller div[style*='background: white'],
.ace_scroller div[style*='background:#fff'],
.ace_scroller div[style*='background-color:#fff'] { background: transparent !important; }
/* Selection tweak for contrast */
.ace_marker-layer .ace_selection { background: rgba(100,180,255,0.28) !important; }
/* Active line subtle highlight */
.ace_marker-layer .ace_active-line { background: rgba(255,255,255,0.04) !important; }
/* Gutter styling - ensure proper spacing */
.ace_gutter {
  background:#272727 !important;
}
/* Cursor color */
.ace_cursor { color:#FFFFFF !important; border-left-color:#FFFFFF !important; }

/* Menu Container (generic dark dropdown/panel) */
.menu-container, #menu-container, .context-menu, #context-menu {
  background: var(--card-background) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: var(--shadow-hover) !important;
  border-radius: 6px !important;
  padding: 6px 0 !important;
  min-width: 180px;
  backdrop-filter: blur(4px);
}
.menu-container .menu-item, #menu-container .menu-item,
.context-menu .menu-item {
  padding: 6px 14px !important;
  color: var(--text-primary) !important;
  font-size: 13px !important;
  line-height: 1.2 !important;
  cursor: pointer;
  transition: background .12s ease, color .12s ease;
}
.menu-container .menu-item:hover, #menu-container .menu-item:hover,
.context-menu .menu-item:hover { background: var(--dropdown-hover) !important; color:#FFFFFF !important; }
.menu-container .menu-item.active, #menu-container .menu-item.active { background: var(--primary-color) !important; color:#FFFFFF !important; }
.menu-container .menu-separator { height:1px; background:#333; margin:4px 0; }
.menu-container .menu-item.disabled { opacity:.45; cursor: default; }
/* High contrast variant inside .ftc-dark */
.ftc-dark .menu-container .menu-item.active { box-shadow: 0 0 0 2px rgba(255,255,255,.35); }

/* Prevent white focus outline artifacts */
.menu-container .menu-item:focus { outline: 2px solid var(--primary-color) !important; outline-offset: 2px; }

/* Ensure no white backgrounds leak via inline styles on menu items */
.menu-container [style*='background:#fff'], .menu-container [style*='background: white'] { background: var(--card-background) !important; }
/* --- End Ace & Menu Overrides --- */

/* --- Fix: Ace code not visible & Help Text styling (Final Overrides) --- */
/* Ensure text spans are visible with explicit color */
.ace_text-layer span, .ace_line, .ace_line span {
  color: var(--text-primary) !important;
}
.ace_hidden-cursors { background: transparent !important; }
/* Cursor should remain visible */
.ace_cursor {
  border-left: 2px solid #FFFFFF !important;
}

/* Help text blocks (generic selectors to catch variants) */
.help-text, .helpText, .help_box, .help-panel, .helpPanel, .help-content, .helpContent,
.blocklyHelp, .blocklyHelpText, .ftc-help, .ftc_help {
  background: var(--card-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  padding: 8px 12px !important;
  font-size: 13px !important;
  line-height: 1.45 !important;
  border-radius: 6px !important;
  box-shadow: var(--shadow) !important;
  max-width: 520px;
}
.help-text a, .helpText a, .help-panel a, .blocklyHelp a { color: var(--primary-color) !important; }
.help-text code, .help-panel code { background:#1E1E1E !important; color:#D4D4D4 !important; padding:2px 6px; border-radius:4px; }
/* Fix empty help box issue (if zero-height) */
.help-text:empty, .help-panel:empty, .blocklyHelpText:empty { min-height: 24px; display:flex; align-items:center; justify-content:center; color:#888 !important; }
/* Ensure tooltips/help not forced white via inline */
.help-text[style*='background:#fff'], .help-panel[style*='background:#fff'] { background: var(--card-background) !important; }
/* --- End Final Overrides --- */

/* === Input Group & Navigation Overhaul (Final Enhancement) === */
/* Input groups (label addons beside inputs) */
.input-group, .inputGroup, .input_group {
  display: flex;
  align-items: stretch;
  width: 100%;
  gap: 0;
}
.input-group-addon, .inputGroupAddon, .input-group-text, .group-addon {
  background: #2A2A2A !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  padding: 6px 10px !important;
  font-size: 13px !important;
  display: flex;
  align-items: center;
  font-weight: 500;
  border-radius: 4px 0 0 4px;
  line-height: 1.2;
  min-width: 42px;
}
.input-group > input, .input-group > select, .input-group > textarea,
.inputGroup > input, .input_group > input {
  border: 1px solid var(--border-color) !important;
  background: var(--input-background) !important;
  color: var(--text-primary) !important;
  padding: 6px 10px !important;
  font-size: 13px !important;
  line-height: 1.2 !important;
  flex: 1 1 auto;
  border-radius: 0 4px 4px 0;
  outline: none;
}
.input-group > input:focus, .input-group > select:focus, .input-group > textarea:focus {
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 2px rgba(66,165,245,0.25);
}
/* Compact variant */
.input-group.compact .input-group-addon { padding:4px 8px !important; font-size:12px !important; }
.input-group.compact > input { padding:4px 8px !important; font-size:12px !important; }
/* Disabled state */
.input-group-addon.disabled, .input-group > input:disabled { opacity:.55; cursor:not-allowed; }

/* === Navigation Overhaul === */
/* Old nav link styles remain; new system below offers classes for better control */
.nav-bar, .navigation-bar, .main-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  background: linear-gradient(135deg, #242424 0%, #202020 100%) !important;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  box-shadow: var(--shadow);
}
.nav-bar--dense { gap:4px; padding:6px 8px; }
.nav-item, .nav-btn, .navigation-button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: .3px;
  background: #2C2C2C;
  color: var(--text-primary);
  border: 1px solid #373737;
  border-radius: 6px;
  cursor: pointer;
  text-decoration: none !important;
  transition: background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease, transform .18s ease;
  min-height: 34px;
  user-select: none;
}
.nav-item:hover, .nav-btn:hover, .navigation-button:hover {
  background: #353535;
  border-color: #4A4A4A;
  color: #FFFFFF;
}
.nav-item:active, .nav-btn:active, .navigation-button:active {
  background: #1E1E1E;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(66,165,245,0.25);
  transform: translateY(1px);
}
.nav-item:focus-visible, .nav-btn:focus-visible, .navigation-button:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(66,165,245,0.55), 0 0 0 4px rgba(66,165,245,0.25);
}
/* Active state */
.nav-item.active, .nav-btn.active, .navigation-button.active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 1px rgba(66,165,245,0.6), 0 2px 6px rgba(0,0,0,.4);
}
/* Icon only */
.nav-item.icon-only { padding:8px; width:34px; }
.nav-item.icon-only .label { display:none; }
/* Disabled */
.nav-item.disabled, .nav-btn.disabled { opacity:.45; cursor: not-allowed; }
/* Danger / Warning / Success variants */
.nav-item--danger { background:#402222; border-color:#603030; color:#F26D6D; }
.nav-item--danger:hover { background:#5A2A2A; color:#FF8A8A; }
.nav-item--success { background:#1F3A28; border-color:#285539; color:#6ECF8F; }
.nav-item--success:hover { background:#264A34; color:#97E8B1; }
.nav-item--warning { background:#3F3214; border-color:#5C4A1F; color:#FFBE6A; }
.nav-item--warning:hover { background:#4A3C19; color:#FFD28F; }
/* Small & Large size modifiers */
.nav-item--sm { padding:5px 10px; font-size:12px; min-height: 30px; }
.nav-item--lg { padding:12px 18px; font-size:14px; min-height: 40px; }
/* Grouping */
.nav-group { display:flex; gap:0; }
.nav-group .nav-item { border-radius:0; }
.nav-group .nav-item:first-child { border-radius:6px 0 0 6px; }
.nav-group .nav-item:last-child { border-radius:0 6px 6px 0; }
.nav-group .nav-item:not(:first-child) { margin-left:-1px; }
/* Badge inside button */
.nav-item .badge { position: relative; top:-2px; }
/* Loading state */
.nav-item.loading { pointer-events:none; opacity:.7; }
.nav-item.loading::after { content:""; position:absolute; inset:0; border-radius:inherit; background:linear-gradient(120deg, rgba(255,255,255,0.05), rgba(255,255,255,0)); animation: navShimmer 1.2s infinite; }
@keyframes navShimmer { 0% { background-position:-100px; } 100% { background-position:200px; } }
/* High contrast adjustments within .ftc-dark */
.ftc-dark .nav-item.active { box-shadow:0 0 0 2px rgba(255,255,255,.35); }
/* Reduce motion respect */
@media (prefers-reduced-motion: reduce) { .nav-item, .nav-btn { transition:none !important; animation:none !important; } }
/* Responsive collapse example */
@media (max-width: 640px) { .nav-bar { flex-wrap: wrap; gap:6px; } .nav-item--lg { width:100%; justify-content:flex-start; } }
/* === End Input Group & Navigation Overhaul === */

/* === File Tree & List Group Items (Final Fix) === */
/* List group items (used in file trees and lists) */
.list-group, .listGroup, .list_group {
  background: var(--card-background) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 6px !important;
  padding: 0 !important;
  margin: 0 !important;
}

.list-group-item, .listGroupItem, .list_group_item {
  background: transparent !important;
  color: var(--text-primary) !important;
  border: none !important;
  border-bottom: 1px solid var(--border-color) !important;
  padding: 6px 12px !important;
  font-size: 13px !important;
  cursor: pointer !important;
  transition: background .15s ease !important;
  pointer-events: auto !important;
  user-select: none !important;
}

.list-group-item:hover, .listGroupItem:hover, .list_group_item:hover {
  background: var(--dropdown-hover) !important;
  color: #FFFFFF !important;
}

.list-group-item:active, .listGroupItem:active, .list_group_item:active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
}

.list-group-item.active, .listGroupItem.active, .list_group_item.active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  font-weight: 600;
}

.list-group-item:last-child {
  border-bottom: none !important;
}

/* Node file tree elements */
.node-file-tree, .nodeFileTree, .node_file_tree,
.file-tree-node, .fileTreeNode, .file_tree_node {
  background: transparent !important;
  color: var(--text-primary) !important;
  padding: 4px 8px !important;
  font-size: 13px !important;
  cursor: pointer !important;
  transition: background .12s ease !important;
  pointer-events: auto !important;
  user-select: none !important;
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
}

.node-file-tree:hover, .nodeFileTree:hover, .node_file_tree:hover,
.file-tree-node:hover, .fileTreeNode:hover, .file_tree_node:hover {
  background: #333333 !important;
  color: #FFFFFF !important;
}

.node-file-tree:active, .file-tree-node:active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
}

.node-file-tree.selected, .node-file-tree.active,
.file-tree-node.selected, .file-tree-node.active {
  background: var(--primary-color) !important;
  color: #FFFFFF !important;
  font-weight: 500;
}

/* Folder icons in file tree */
.node-file-tree .folder-icon, .node-file-tree .file-icon,
.file-tree-node .folder-icon, .file-tree-node .file-icon {
  pointer-events: none !important;
  width: 16px !important;
  height: 16px !important;
  flex-shrink: 0 !important;
}

/* Nested file tree items */
.node-file-tree.nested, .file-tree-node.nested {
  padding-left: 24px !important;
}

.node-file-tree.nested.level-2 { padding-left: 36px !important; }
.node-file-tree.nested.level-3 { padding-left: 48px !important; }

/* Ensure file tree items are clickable and not blocked by other layers */
.file-tree-container .node-file-tree,
.file-tree-container .list-group-item,
#file-tree-container .node-file-tree,
#file-tree-container .list-group-item {
  position: relative !important;
  z-index: 1 !important;
  pointer-events: auto !important;
}

/* Ensure clicks pass through to file tree links */
.file-tree-container a, #file-tree-container a {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Fix any overlay that might be blocking clicks */
.file-tree-container::before,
.file-tree-container::after,
#file-tree-container::before,
#file-tree-container::after {
  display: none !important;
}

/* Ensure file tree doesn't have overlay elements blocking interaction */
.file-tree-container > *:not(.node-file-tree):not(.list-group-item):not(a) {
  pointer-events: none !important;
}
/* === End File Tree & List Group Items === */

/* === BOOTSTRAP & FTC INTERFACE COMPONENTS (Complete Coverage) === */

/* Bootstrap Buttons - Dark Theme */
.btn {
  background: var(--card-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 4px !important;
  padding: 8px 16px !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  text-decoration: none !important;
  display: inline-block !important;
}

.btn:hover {
  background: #353535 !important;
  border-color: #555 !important;
  color: #FFFFFF !important;
  text-decoration: none !important;
}

.btn-primary {
  background: var(--primary-color) !important;
  color: white !important;
  border-color: var(--primary-color) !important;
}

.btn-primary:hover {
  background: var(--primary-dark) !important;
  border-color: var(--primary-dark) !important;
  color: white !important;
}

.btn-warning {
  background: #3F3214 !important;
  color: #FFBE6A !important;
  border-color: #5C4A1F !important;
}

.btn-warning:hover {
  background: #4A3C19 !important;
  color: #FFD28F !important;
  border-color: #6B5825 !important;
}

.btn-default {
  background: #2C2C2C !important;
  color: var(--text-primary) !important;
  border-color: #373737 !important;
}

.btn-default:hover {
  background: #353535 !important;
  color: #FFFFFF !important;
  border-color: #4A4A4A !important;
}

/* Bootstrap Navbar - Dark Theme */
.navbar {
  background: linear-gradient(135deg, #242424 0%, #202020 100%) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: var(--shadow) !important;
  min-height: 50px !important;
}

.navbar-default {
  background: linear-gradient(135deg, #242424 0%, #202020 100%) !important;
  border-color: var(--border-color) !important;
}

.navbar-fixed-top {
  background: linear-gradient(135deg, #242424 0%, #202020 100%) !important;
  z-index: 1030 !important;
}

.navbar-header {
  float: left !important;
}

.navbar-brand {
  color: var(--text-primary) !important;
  font-weight: 600 !important;
  font-size: 16px !important;
  padding: 15px 20px !important;
}

.navbar-brand:hover, .navbar-brand:focus {
  color: #FFFFFF !important;
  text-decoration: none !important;
}

.navbar-nav {
  margin: 0 !important;
  display: flex !important;
  list-style: none !important;
}

.navbar-nav > li {
  display: block !important;
  position: relative !important;
}

.navbar-nav > li > a {
  color: var(--text-primary) !important;
  padding: 15px 20px !important;
  line-height: 20px !important;
  display: block !important;
  text-decoration: none !important;
}

.navbar-nav > li > a:hover,
.navbar-nav > li > a:focus {
  color: #FFFFFF !important;
  background: #353535 !important;
}

.navbar-nav > li.active > a {
  color: #FFFFFF !important;
  background: var(--primary-color) !important;
}

.navbar-right {
  float: right !important;
  margin-right: -15px !important;
}

.navbar-btn {
  margin-top: 8px !important;
  margin-bottom: 8px !important;
}

.navbar-link {
  color: var(--text-primary) !important;
}

.navbar-link:hover {
  color: #FFFFFF !important;
}

.navbar-toggle {
  background: #2C2C2C !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 4px !important;
  padding: 9px 10px !important;
  margin-top: 8px !important;
  margin-right: 15px !important;
  margin-bottom: 8px !important;
}

.navbar-toggle:hover, .navbar-toggle:focus {
  background: #353535 !important;
  border-color: #555 !important;
}

.navbar-toggle .icon-bar {
  background-color: var(--text-primary) !important;
  display: block !important;
  width: 22px !important;
  height: 2px !important;
  border-radius: 1px !important;
}

.navbar-toggle .icon-bar + .icon-bar {
  margin-top: 4px !important;
}

.navbar-collapse {
  border-top: 1px solid var(--border-color) !important;
  box-shadow: none !important;
}

.navbar-collapse.collapse {
  display: none !important;
}

.navbar-collapse.collapse.in {
  display: block !important;
}

/* FTC Specific Navbar IDs */
#theNavBar {
  background: linear-gradient(135deg, #242424 0%, #202020 100%) !important;
  border-color: var(--border-color) !important;
}

#theNavBarData {
  background: transparent !important;
}

#theNavBarItems, #theNavBarItemsRight {
  background: transparent !important;
}

#id_nav_blocks, #id_nav_manage, #id_nav_onbotjava, #id_nav_help, #id_nav_exit {
  color: var(--text-primary) !important;
  background: transparent !important;
  padding: 15px 20px !important;
  text-decoration: none !important;
  display: block !important;
  transition: background .15s ease, color .15s ease !important;
}

#id_nav_blocks:hover, #id_nav_manage:hover, #id_nav_onbotjava:hover,
#id_nav_help:hover, #id_nav_exit:hover {
  color: #FFFFFF !important;
  background: #353535 !important;
}

#id_nav_blocks.active, #id_nav_manage.active, #id_nav_onbotjava.active,
#id_nav_help.active, #id_nav_exit.active {
  color: #FFFFFF !important;
  background: var(--primary-color) !important;
}

/* Bootstrap Modals - Dark Theme */
.modal {
  background: rgba(0, 0, 0, 0.7) !important;
}

.modal-dialog {
  margin: 30px auto !important;
}

.modal-content {
  background: var(--card-background) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 8px !important;
  box-shadow: 0 10px 40px rgba(0,0,0,0.5) !important;
}

.modal-header {
  background: var(--primary-color) !important;
  color: white !important;
  padding: 20px !important;
  border-bottom: none !important;
  border-radius: 8px 8px 0 0 !important;
}

.modal-body {
  background: var(--card-background) !important;
  color: var(--text-primary) !important;
  padding: 20px !important;
}

.modal-footer {
  background: #252525 !important;
  color: var(--text-primary) !important;
  padding: 15px 20px !important;
  border-top: 1px solid var(--border-color) !important;
  border-radius: 0 0 8px 8px !important;
  text-align: right !important;
}

#promptModal {
  background: rgba(0, 0, 0, 0.7) !important;
}

#promptMessage {
  color: var(--text-primary) !important;
  font-size: 14px !important;
  line-height: 1.6 !important;
}

#promptResponse {
  background: var(--input-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 4px !important;
  padding: 8px 12px !important;
  font-size: 13px !important;
  width: 100% !important;
}

#promptResponse:focus {
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 2px rgba(66,165,245,0.25) !important;
  outline: none !important;
}

/* Bootstrap Utility Classes */
.container-fluid {
  padding-right: 15px !important;
  padding-left: 15px !important;
  margin-right: auto !important;
  margin-left: auto !important;
}

.collapse {
  display: none !important;
}

.collapse.in {
  display: block !important;
}

/* .collapsed - controlled by JS, no styling needed */

.fade {
  opacity: 0 !important;
  transition: opacity 0.15s linear !important;
}

.fade.in {
  opacity: 1 !important;
}

.hidden {
  display: none !important;
}

.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0,0,0,0) !important;
  border: 0 !important;
}

/* Bootstrap Form Controls */
.form-control {
  background: var(--input-background) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 4px !important;
  padding: 8px 12px !important;
  font-size: 13px !important;
  line-height: 1.4 !important;
  display: block !important;
  width: 100% !important;
  transition: border-color 0.15s ease, box-shadow 0.15s ease !important;
}

.form-control:focus {
  border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 2px rgba(66,165,245,0.25) !important;
  outline: none !important;
}

/* FTC Branding Elements */
.brandphrase, .brandphraseword, .wordmarkandphrase,
.wordmark, .wordmarkfirstword, .trademark {
  color: var(--text-primary) !important;
  font-weight: 600 !important;
}

.brandphrase:hover, .wordmark:hover {
  color: #FFFFFF !important;
}

/* IFrame Container */
#theIFrame, .theiframe {
  background: var(--background) !important;
  border: none !important;
  width: 100% !important;
  min-height: calc(100vh - 60px) !important;
}

#theIFrameContainer {
  background: var(--background) !important;
  width: 100% !important;
  height: 100% !important;
  overflow: hidden !important;
}

/* Ping Failure Alert */
#pingFailure {
  background: rgba(239,83,80,0.15) !important;
  color: #EF5350 !important;
  border: 1px solid var(--error-color) !important;
  border-left: 4px solid var(--error-color) !important;
  padding: 15px 20px !important;
  border-radius: 4px !important;
  margin: 10px !important;
  font-size: 14px !important;
  font-weight: 500 !important;
}

/* Stylus Extension Compatibility - no styling needed */

/* Active State for Navigation Items */
.active {
  color: #FFFFFF !important;
  background: var(--primary-color) !important;
}

nav .active, .navbar .active {
  background: var(--primary-color) !important;
}

/* Mobile Responsive Navbar */
@media (max-width: 768px) {
  .navbar-header {
    float: none !important;
  }

  .navbar-toggle {
    display: block !important;
  }

  .navbar-collapse {
    border-top: 1px solid var(--border-color) !important;
    clear: both !important;
  }

  .navbar-nav {
    float: none !important;
    margin: 0 !important;
  }

  .navbar-nav > li {
    float: none !important;
  }

  .navbar-nav > li > a {
    padding-top: 10px !important;
    padding-bottom: 10px !important;
  }

  .navbar-right {
    float: none !important;
    margin-right: 0 !important;
  }
}

/* Ensure pointer events work on all interactive elements */
.btn, .navbar-nav > li > a, .navbar-brand, .navbar-toggle,
#id_nav_blocks, #id_nav_manage, #id_nav_onbotjava, #id_nav_help, #id_nav_exit {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Fix any white text on white background in modals */
.modal-body *, .modal-footer * {
  color: inherit !important;
}

.modal-body input, .modal-body select, .modal-body textarea {
  color: var(--text-primary) !important;
}

/* === END BOOTSTRAP & FTC INTERFACE COMPONENTS === */

